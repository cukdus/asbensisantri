<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Index - MySchool Bootstrap Template</title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />

    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon" />
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />

    <!-- Vendor CSS Files -->
    <link
      href="assets/vendor/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="assets/vendor/bootstrap-icons/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />
    <link
      href="assets/vendor/glightbox/css/glightbox.min.css"
      rel="stylesheet"
    />

    <!-- Main CSS File -->
    <link href="assets/css/main.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- =======================================================
  * Template Name: MySchool
  * Template URL: https://bootstrapmade.com/myschool-bootstrap-school-template/
  * Updated: Jul 28 2025 with Bootstrap v5.3.7
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
  </head>

  <body class="about-page">
    <!DOCTYPE html>
    <html lang="en">
      <head>
        <meta charset="utf-8" />
        <meta content="width=device-width, initial-scale=1.0" name="viewport" />
        <title>Index - MySchool Bootstrap Template</title>
        <meta name="description" content="" />
        <meta name="keywords" content="" />

        <!-- Favicons -->
        <link href="assets/img/favicon.png" rel="icon" />
        <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

        <!-- Fonts -->
        <link href="https://fonts.googleapis.com" rel="preconnect" />
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin />
        <link
          href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
          rel="stylesheet"
        />

        <!-- Vendor CSS Files -->
        <link
          href="assets/vendor/bootstrap/css/bootstrap.min.css"
          rel="stylesheet"
        />
        <link
          href="assets/vendor/bootstrap-icons/bootstrap-icons.css"
          rel="stylesheet"
        />
        <link
          href="assets/vendor/swiper/swiper-bundle.min.css"
          rel="stylesheet"
        />
        <link
          href="assets/vendor/glightbox/css/glightbox.min.css"
          rel="stylesheet"
        />

        <!-- Main CSS File -->
        <link href="assets/css/main.css" rel="stylesheet" />

        <!-- =======================================================
  * Template Name: MySchool
  * Template URL: https://bootstrapmade.com/myschool-bootstrap-school-template/
  * Updated: Jul 28 2025 with Bootstrap v5.3.7
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
      </head>

      <body class="index-page">
        <!DOCTYPE html>
        <html lang="id">
          <head>
            <meta charset="UTF-8" />
            <meta
              name="viewport"
              content="width=device-width, initial-scale=1.0"
            />
            <title>Playlist Video - Pondok Pesantren SIROJAN Muniro</title>
            <link
              rel="stylesheet"
              href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css"
            />
            <link
              rel="stylesheet"
              href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
            />
            <style>
              * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
              }

              body {
                font-family: "Roboto", "Arial", sans-serif;
                background-color: #0f0f0f;
                color: #ffffff;
                line-height: 1.4;
              }

              /* ========== HEADER STYLES ========== */
              #header {
                background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%);
                border-bottom: 1px solid #333;
                position: relative;
                z-index: 1000;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
              }

              .top-header {
                padding: 15px 20px;
                background: linear-gradient(45deg, #1e3a8a, #3b82f6);
                color: white;
                display: flex;
                justify-content: space-between;
                align-items: center;
              }

              .top-header h2 {
                font-size: 1.8rem;
                font-weight: 700;
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
              }

              .top-header a {
                color: white;
                text-decoration: none;
              }

              .social-links a {
                color: white;
                transition: opacity 0.3s;
              }

              .social-links a:hover {
                opacity: 0.8;
              }

              .nav-header {
                background-color: #212121;
                padding: 0;
                border-bottom: 1px solid #333;
              }

              .navmenu ul {
                display: flex;
                list-style: none;
                margin: 0;
                padding: 0;
              }

              .navmenu ul li a {
                display: block;
                padding: 15px 25px;
                color: #ffffff;
                text-decoration: none;
                font-weight: 500;
                transition: all 0.3s ease;
                border-bottom: 3px solid transparent;
              }

              .navmenu ul li a:hover,
              .navmenu ul li a.active {
                background-color: #333;
                border-bottom-color: #ff0000;
              }

              /* ========== MOBILE MENU ========== */
              .mobile-menu-btn {
                display: none;
                background: #333;
                color: white;
                border: none;
                padding: 12px 20px;
                font-size: 16px;
                cursor: pointer;
                border-radius: 4px;
                margin: 10px 20px;
              }

              .mobile-menu-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                z-index: 2000;
              }

              .mobile-menu-overlay.active {
                display: block;
              }

              .mobile-menu-content {
                position: absolute;
                top: 0;
                right: 0;
                width: 280px;
                height: 100%;
                background: #1a1a1a;
                transform: translateX(100%);
                transition: transform 0.3s ease;
              }

              .mobile-menu-overlay.active .mobile-menu-content {
                transform: translateX(0);
              }

              .mobile-menu-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 20px;
                background: #333;
              }

              .mobile-menu-close {
                background: none;
                border: none;
                color: white;
                font-size: 24px;
                cursor: pointer;
              }

              .mobile-menu-items a {
                display: block;
                padding: 15px 20px;
                color: white;
                text-decoration: none;
                border-bottom: 1px solid #333;
                transition: background 0.3s ease;
              }

              .mobile-menu-items a:hover,
              .mobile-menu-items a.active {
                background: #333;
                color: #ff0000;
              }

              /* ========== MAIN CONTENT ========== */
              .main {
                padding: 20px;
                max-width: 1400px;
                margin: 0 auto;
              }

              /* ========== CONTROLS ========== */
              .controls {
                display: flex;
                flex-wrap: wrap;
                gap: 15px;
                margin-bottom: 30px;
                padding: 20px;
                background: #1a1a1a;
                border-radius: 12px;
                border: 1px solid #333;
              }

              .control-group {
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
                align-items: center;
              }

              .primary-btn {
                background: linear-gradient(45deg, #ff0000, #cc0000);
                color: white;
                border: none;
                padding: 12px 20px;
                border-radius: 25px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                font-size: 14px;
                display: flex;
                align-items: center;
                gap: 8px;
                box-shadow: 0 2px 8px rgba(255, 0, 0, 0.3);
              }

              .primary-btn:hover {
                background: linear-gradient(45deg, #cc0000, #990000);
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(255, 0, 0, 0.4);
              }

              .primary-btn:disabled {
                opacity: 0.6;
                cursor: not-allowed;
                transform: none;
              }

              .filter-btn {
                background: #333;
                color: #ffffff;
                border: 1px solid #555;
                padding: 10px 18px;
                border-radius: 20px;
                font-weight: 500;
                cursor: pointer;
                transition: all 0.3s ease;
                font-size: 13px;
              }

              .filter-btn:hover,
              .filter-btn.active {
                background: #ffffff;
                color: #000000;
                border-color: #ffffff;
              }

              .search-input {
                background: #333;
                border: 1px solid #555;
                color: #ffffff;
                padding: 12px 16px;
                border-radius: 25px;
                font-size: 14px;
                min-width: 250px;
                transition: all 0.3s ease;
              }

              .search-input:focus {
                outline: none;
                border-color: #3ea6ff;
                background: #444;
              }

              .search-input::placeholder {
                color: #aaa;
              }

              /* ========== STATUS MESSAGES ========== */
              .status {
                padding: 15px 20px;
                border-radius: 8px;
                margin-bottom: 20px;
                font-weight: 500;
                border-left: 4px solid;
                display: none;
              }

              .status.success {
                background: rgba(34, 197, 94, 0.1);
                color: #22c55e;
                border-left-color: #22c55e;
              }

              .status.error {
                background: rgba(239, 68, 68, 0.1);
                color: #ef4444;
                border-left-color: #ef4444;
              }

              .status.loading {
                background: rgba(59, 130, 246, 0.1);
                color: #3b82f6;
                border-left-color: #3b82f6;
              }

              /* ========== STATISTICS ========== */
              .stats {
                display: flex;
                justify-content: space-evenly;
                align-items: stretch;
                flex-wrap: wrap;
                gap: 20px;
                margin-bottom: 30px;
              }

              .stat-item {
                flex: 1 1 200px;
                max-width: 220px;
                background: #1c1c1c;
                padding: 20px;
                border-radius: 10px;
                text-align: center;
                transition: transform 0.3s, box-shadow 0.3s;
              }

              .stat-item:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
              }

              .stat-number {
                font-size: 2rem;
                font-weight: bold;
                color: #ff0000;
              }

              .stat-label {
                font-size: 0.9rem;
                color: #aaa;
                margin-top: 5px;
              }

              /* ========== VIDEO GRID ========== */
              .video-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
                gap: 20px;
              }

              .video-item {
                background: #1a1a1a;
                border-radius: 12px;
                overflow: hidden;
                cursor: pointer;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                border: 1px solid #333;
                position: relative;
              }

              .video-item:hover {
                transform: translateY(-4px);
                box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
                border-color: #555;
              }

              .video-item.very-new {
                border-color: #ff0000;
                box-shadow: 0 0 15px rgba(255, 0, 0, 0.3);
              }

              .video-item.new {
                border-color: #3b82f6;
                box-shadow: 0 0 10px rgba(59, 130, 246, 0.2);
              }

              .video-thumbnail-container {
                position: relative;
                aspect-ratio: 16/9;
                overflow: hidden;
                background: #000;
              }

              .video-thumbnail {
                width: 100%;
                height: 100%;
                object-fit: cover;
                transition: transform 0.3s ease;
              }

              .video-item:hover .video-thumbnail {
                transform: scale(1.05);
              }

              .video-duration {
                position: absolute;
                bottom: 8px;
                right: 8px;
                background: rgba(0, 0, 0, 0.8);
                color: white;
                padding: 4px 8px;
                border-radius: 4px;
                font-size: 12px;
                font-weight: 600;
              }

              .very-new-badge,
              .new-badge {
                position: absolute;
                top: 8px;
                left: 8px;
                padding: 4px 8px;
                border-radius: 4px;
                font-size: 10px;
                font-weight: 700;
                letter-spacing: 0.5px;
                z-index: 10;
              }

              .very-new-badge {
                background: linear-gradient(45deg, #ff0000, #ff4444);
                color: white;
                animation: pulse 2s infinite;
              }

              .new-badge {
                background: linear-gradient(45deg, #3b82f6, #60a5fa);
                color: white;
              }

              @keyframes pulse {
                0%,
                100% {
                  transform: scale(1);
                }
                50% {
                  transform: scale(1.05);
                }
              }

              .video-content {
                padding: 16px;
              }

              .video-title {
                font-size: 16px;
                font-weight: 600;
                color: #ffffff;
                line-height: 1.3;
                margin-bottom: 8px;
                display: -webkit-box;
                -webkit-line-clamp: 2;
                -webkit-box-orient: vertical;
                overflow: hidden;
              }

              .video-channel {
                font-size: 14px;
                color: #aaa;
                font-weight: 500;
                margin-bottom: 6px;
              }

              .video-meta {
                font-size: 13px;
                color: #aaa;
                display: flex;
                align-items: center;
                gap: 6px;
                margin-bottom: 10px;
              }

              .video-description {
                font-size: 13px;
                color: #ccc;
                line-height: 1.4;
                display: -webkit-box;
                -webkit-line-clamp: 2;
                -webkit-box-orient: vertical;
                overflow: hidden;
              }

              /* ========== EMPTY STATE ========== */
              .empty-state {
                text-align: center;
                padding: 60px 20px;
                color: #666;
                grid-column: 1 / -1;
              }

              .empty-state-icon {
                font-size: 4rem;
                margin-bottom: 20px;
                opacity: 0.5;
              }

              /* ========== UTILITIES ========== */
              .spinner {
                width: 16px;
                height: 16px;
                border: 2px solid transparent;
                border-top: 2px solid currentColor;
                border-radius: 50%;
                animation: spin 1s linear infinite;
              }

              .hidden {
                display: none !important;
              }

              @keyframes spin {
                to {
                  transform: rotate(360deg);
                }
              }

              /* ========== WHATSAPP FLOAT BUTTON ========== */
              .wa-float {
                position: fixed;
                width: 60px;
                height: 60px;
                bottom: 20px;
                left: 20px;
                background-color: #25d366;
                color: white;
                border-radius: 50%;
                text-align: center;
                font-size: 30px;
                box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                transition: transform 0.2s ease, box-shadow 0.2s ease;
              }

              .wa-float:hover {
                transform: scale(1.1);
                box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.4);
                background-color: #20bd5a;
              }

              /* ========== SCROLLBAR ========== */
              ::-webkit-scrollbar {
                width: 8px;
              }

              ::-webkit-scrollbar-track {
                background: #1a1a1a;
              }

              ::-webkit-scrollbar-thumb {
                background: #555;
                border-radius: 4px;
              }

              ::-webkit-scrollbar-thumb:hover {
                background: #666;
              }

              /* ========== RESPONSIVE ========== */
              @media (max-width: 768px) {
                .navmenu {
                  display: none;
                }

                .mobile-menu-btn {
                  display: block;
                }

                .top-header {
                  flex-direction: column;
                  text-align: center;
                  gap: 15px;
                }

                .top-header h2 {
                  font-size: 1.5rem;
                }

                .main {
                  padding: 10px;
                }

                .controls {
                  padding: 15px;
                }

                .control-group {
                  width: 100%;
                  justify-content: center;
                }

                .search-input {
                  min-width: 100%;
                }

                .video-grid {
                  grid-template-columns: 1fr;
                  gap: 15px;
                }

                .stat-item {
                  flex: 1 1 150px;
                }
              }

              @media (max-width: 480px) {
                .top-header h2 {
                  font-size: 1.3rem;
                }

                .stat-number {
                  font-size: 1.5rem;
                }
              }
            </style>
          </head>
          <body>
            <!-- Header -->
            <header id="header">
              <div class="top-header">
                <div class="d-flex align-items-center">
                  <img
                    src="assets/img/ponpes.png"
                    alt="Logo"
                    style="height: 90px; margin-right: 10px"
                  />
                  <h2>PONDOK PESANTREN<br /><strong>SIROJAN MUNIRO</strong></h2>
                </div>
                <div style="display: flex; align-items: center; gap: 20px">
                  <div class="small">
                    <strong>CONTACT</strong><br />
                    <a href="tel:081329039527">081329039527</a>
                  </div>
                  <div class="small">
                    <strong>E-MAIL</strong><br />
                    <a href="mailto:sirojanmuniroassalam@gmail.com"
                      >sirojanmuniroassalam@gmail.com</a
                    >
                  </div>
                  <div class="social-links">
                    <a
                      href="https://www.youtube.com/channel/UChBvBOlAoq2YFPdHjWnSjNA"
                      ><i class="bi bi-youtube fs-5 me-2"></i
                    ></a>
                    <a href="https://www.facebook.com/Sirojanmuniroassalam"
                      ><i class="bi bi-facebook fs-5 me-2"></i
                    ></a>
                    <a href="https://www.instagram.com/sirojanmuniro_assalam"
                      ><i class="bi bi-instagram fs-5"></i
                    ></a>
                  </div>
                </div>
              </div>

              <div class="nav-header">
                <nav class="navmenu">
                  <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="ngaji.html" class="active">Playlist</a></li>
                    <li><a href="online.html">Al-Qur'an</a></li>
                    <li><a href="galery.html">Galeri</a></li>
                    <li><a href="contact.html">Contact</a></li>
                  </ul>
                </nav>
                <button class="mobile-menu-btn" onclick="openMobileMenu()">
                  ≡ Menu
                </button>
              </div>
            </header>

            <!-- Mobile Menu -->
            <div
              class="mobile-menu-overlay"
              id="mobileMenuOverlay"
              onclick="closeMobileMenu(event)"
            >
              <div
                class="mobile-menu-content"
                onclick="event.stopPropagation()"
              >
                <div class="mobile-menu-header">
                  <span class="mobile-menu-title">Menu Navigasi</span>
                  <button class="mobile-menu-close" onclick="closeMobileMenu()">
                    &times;
                  </button>
                </div>
                <div class="mobile-menu-items">
                  <a href="index.html">Home</a>
                  <a href="about.html">About</a>
                  <a href="ngaji.html" class="active">Playlist</a>
                  <a href="online.html">Al-Qur'an</a>
                  <a href="galery.html">Galeri</a>
                  <a href="contact.html">Contact</a>
                </div>
              </div>
            </div>

            <!-- WhatsApp Float -->
            <a
              href="https://wa.me/6285731397860"
              target="_blank"
              class="wa-float"
            >
              <i class="fab fa-whatsapp"></i>
            </a>

            <!-- Main Content -->
            <main class="main">
              <!-- Controls -->
              <div class="controls">
                <div class="control-group">
                  <button
                    id="loadBtn"
                    class="primary-btn"
                    onclick="loadVideos()"
                  >
                    <span id="loadBtnText">🔄 Muat Video Terbaru</span>
                    <span id="loadBtnSpinner" class="spinner hidden"></span>
                  </button>
                  <button
                    class="primary-btn"
                    onclick="toggleAutoRefresh()"
                    id="autoRefreshBtn"
                  >
                    ⏰ Auto Refresh (2 menit)
                  </button>
                  <input
                    type="text"
                    id="searchInput"
                    placeholder="🔍 Cari video..."
                    class="search-input"
                  />
                </div>

                <div class="control-group">
                  <button
                    class="filter-btn active"
                    onclick="filterVideos('all', this)"
                  >
                    📺 Semua Video
                  </button>
                  <button
                    class="filter-btn"
                    onclick="filterVideos('today', this)"
                  >
                    🕐 Hari Ini
                  </button>
                  <button
                    class="filter-btn"
                    onclick="filterVideos('week', this)"
                  >
                    📅 Seminggu Terakhir
                  </button>
                  <button
                    class="filter-btn"
                    onclick="filterVideos('month', this)"
                  >
                    📆 Bulan Ini
                  </button>
                </div>
              </div>

              <!-- Status Message -->
              <div id="statusMessage" class="status"></div>

              <!-- Statistics -->
              <div id="statsSection" class="stats">
                <div class="stat-item">
                  <div class="stat-number" id="totalVideos">0</div>
                  <div class="stat-label">Total Video</div>
                </div>
                <div class="stat-item">
                  <div class="stat-number" id="newVideos">0</div>
                  <div class="stat-label">Video Baru (3 hari)</div>
                </div>
                <div class="stat-item">
                  <div class="stat-number" id="weekVideos">0</div>
                  <div class="stat-label">Video Seminggu</div>
                </div>
                <div class="stat-item">
                  <div class="stat-number" id="lastUpdate">-</div>
                  <div class="stat-label">Update Terakhir</div>
                </div>
              </div>

              <!-- Video Grid -->
              <div id="videoGrid" class="video-grid">
                <div class="empty-state">
                  <div class="empty-state-icon">📺</div>
                  <p>Klik "Muat Video Terbaru" untuk memulai</p>
                </div>
              </div>
            </main>

            <script>
              // Global Variables
              let videos = [];
              let allVideos = [];
              let autoRefreshInterval = null;
              let currentFilter = "all";

              const API_KEY = "AIzaSyBPDs_M_H03YruqbUJlvxlpd-JA_gBwsRk";
              const MAX_RESULTS = 50;

              // ========== MENU FUNCTIONS ==========
              function openMobileMenu() {
                document
                  .getElementById("mobileMenuOverlay")
                  .classList.add("active");
                document.body.style.overflow = "hidden";
              }

              function closeMobileMenu(event) {
                if (
                  event &&
                  event.target !== document.getElementById("mobileMenuOverlay")
                )
                  return;
                document
                  .getElementById("mobileMenuOverlay")
                  .classList.remove("active");
                document.body.style.overflow = "auto";
              }

              // ========== VIDEO LOADING ==========
              async function loadVideos() {
                const loadBtn = document.getElementById("loadBtn");
                const loadBtnText = document.getElementById("loadBtnText");
                const loadBtnSpinner =
                  document.getElementById("loadBtnSpinner");

                try {
                  loadBtn.disabled = true;
                  loadBtnText.classList.add("hidden");
                  loadBtnSpinner.classList.remove("hidden");
                  showStatus("loading", "Mencari video Ustadz Mbois...");

                  const baseUrl =
                    "https://www.googleapis.com/youtube/v3/search";
                  const params = new URLSearchParams({
                    key: API_KEY,
                    q: "ustadz mbois",
                    part: "snippet",
                    type: "video",
                    order: "date",
                    maxResults: MAX_RESULTS,
                    relevanceLanguage: "id",
                    regionCode: "ID",
                  });

                  const response = await fetch(`${baseUrl}?${params}`);
                  const data = await response.json();

                  if (data.error)
                    throw new Error(`YouTube API Error: ${data.error.message}`);
                  if (!data.items || data.items.length === 0)
                    throw new Error("Tidak ada video ditemukan");

                  const relevantVideos = data.items.filter((item) => {
                    const text =
                      `${item.snippet.title} ${item.snippet.channelTitle} ${item.snippet.description}`.toLowerCase();
                    return text.includes("mbois") || text.includes("ustadz");
                  });

                  if (relevantVideos.length === 0)
                    throw new Error(
                      "Tidak ada video Ustadz Mbois yang relevan"
                    );

                  const videoIds = relevantVideos
                    .map((item) => item.id.videoId)
                    .join(",");
                  const detailUrl = `https://www.googleapis.com/youtube/v3/videos?key=${API_KEY}&id=${videoIds}&part=contentDetails,statistics`;
                  const detailResponse = await fetch(detailUrl);
                  const detailData = await detailResponse.json();

                  allVideos = relevantVideos.map((item) => {
                    const detail = detailData.items?.find(
                      (d) => d.id === item.id.videoId
                    );
                    return {
                      id: item.id.videoId,
                      title: item.snippet.title,
                      description: item.snippet.description || "",
                      thumbnail:
                        item.snippet.thumbnails.medium?.url ||
                        item.snippet.thumbnails.default.url,
                      publishedAt: item.snippet.publishedAt,
                      channelTitle: item.snippet.channelTitle,
                      duration: detail
                        ? formatDuration(detail.contentDetails.duration)
                        : "N/A",
                      viewCount: detail?.statistics
                        ? parseInt(detail.statistics.viewCount) || 0
                        : 0,
                    };
                  });

                  allVideos.sort(
                    (a, b) => new Date(b.publishedAt) - new Date(a.publishedAt)
                  );
                  videos = [...allVideos];

                  displayVideos();
                  showStatus(
                    "success",
                    `✅ Berhasil memuat ${videos.length} video!`
                  );
                } catch (error) {
                  console.error("Error:", error);
                  showStatus("error", `Gagal memuat video: ${error.message}`);
                } finally {
                  loadBtn.disabled = false;
                  loadBtnText.classList.remove("hidden");
                  loadBtnSpinner.classList.add("hidden");
                }
              }

              // ========== FILTER FUNCTIONS ==========
              function filterVideos(period, buttonElement) {
                currentFilter = period;
                document
                  .querySelectorAll(".filter-btn")
                  .forEach((btn) => btn.classList.remove("active"));
                if (buttonElement) buttonElement.classList.add("active");

                const currentTime = new Date();
                let filterDate;

                switch (period) {
                  case "today":
                    filterDate = new Date(currentTime.setHours(0, 0, 0, 0));
                    break;
                  case "week":
                    filterDate = new Date(
                      currentTime.getTime() - 7 * 24 * 60 * 60 * 1000
                    );
                    break;
                  case "month":
                    filterDate = new Date(
                      currentTime.getTime() - 30 * 24 * 60 * 60 * 1000
                    );
                    break;
                  default:
                    videos = [...allVideos];
                    displayVideos();
                    showStatus(
                      "success",
                      `Menampilkan semua ${videos.length} video`
                    );
                    return;
                }

                videos = allVideos.filter(
                  (video) => new Date(video.publishedAt) >= filterDate
                );
                displayVideos();
                showStatus("success", `Menampilkan ${videos.length} video`);
              }

              // ========== DISPLAY FUNCTIONS ==========
              function displayVideos() {
                const videoGrid = document.getElementById("videoGrid");

                if (!videos || videos.length === 0) {
                  videoGrid.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">😕</div>
                        <p>Tidak ada video ditemukan</p>
                    </div>`;
                  return;
                }

                const currentTime = new Date();
                const sixHoursAgo = new Date(
                  currentTime.getTime() - 6 * 60 * 60 * 1000
                );
                const oneDayAgo = new Date(
                  currentTime.getTime() - 24 * 60 * 60 * 1000
                );
                const threeDaysAgo = new Date(
                  currentTime.getTime() - 3 * 24 * 60 * 60 * 1000
                );

                videoGrid.innerHTML = videos
                  .map((video) => {
                    const publishDate = new Date(video.publishedAt);
                    let badgeHtml = "";
                    let cssClass = "";

                    if (publishDate >= sixHoursAgo) {
                      badgeHtml = '<div class="very-new-badge">LIVE</div>';
                      cssClass = "very-new";
                    } else if (publishDate >= threeDaysAgo) {
                      badgeHtml = '<div class="new-badge">NEW</div>';
                      cssClass = "new";
                    }

                    return `
                    <div class="video-item ${cssClass}" onclick="openVideo('${
                      video.id
                    }')">
                        <div class="video-thumbnail-container">
                            ${badgeHtml}
                            <img src="${video.thumbnail}" alt="${
                      video.title
                    }" class="video-thumbnail" 
                                 onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIwIiBoZWlnaHQ9IjE4MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzIwIiBoZWlnaHQ9IjE4MCIgZmlsbD0iIzEyMTIxMiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmaWxsPSIjYWFhIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIEltYWdlPC90ZXh0Pjwvc3ZnPg=='" />
                            <div class="video-duration">${video.duration}</div>
                        </div>
                        
                        <div class="video-content">
                            <div class="video-title">${video.title}</div>
                            <div class="video-channel">${
                              video.channelTitle
                            }</div>
                            <div class="video-meta">
                                <span>${formatViews(
                                  video.viewCount
                                )} views</span>
                                <span>•</span>
                                <span>${getTimeAgo(publishDate)}</span>
                            </div>
                            <div class="video-description">${
                              video.description
                            }</div>
                        </div>
                    </div>
                `;
                  })
                  .join("");

                updateStats();
              }

              function updateStats() {
                const currentTime = new Date();
                const threeDaysAgo = new Date(
                  currentTime.getTime() - 3 * 24 * 60 * 60 * 1000
                );
                const oneWeekAgo = new Date(
                  currentTime.getTime() - 7 * 24 * 60 * 60 * 1000
                );

                const newVideos = allVideos.filter(
                  (v) => new Date(v.publishedAt) >= threeDaysAgo
                ).length;
                const weekVideos = allVideos.filter(
                  (v) => new Date(v.publishedAt) >= oneWeekAgo
                ).length;

                document.getElementById("totalVideos").textContent =
                  videos.length;
                document.getElementById("newVideos").textContent = newVideos;
                document.getElementById("weekVideos").textContent = weekVideos;
                document.getElementById("lastUpdate").textContent =
                  new Date().toLocaleTimeString("id-ID", {
                    hour: "2-digit",
                    minute: "2-digit",
                  });
              }

              // ========== UTILITY FUNCTIONS ==========
              function formatViews(count) {
                if (count >= 1000000) return (count / 1000000).toFixed(1) + "M";
                if (count >= 1000) return (count / 1000).toFixed(1) + "K";
                return count.toString();
              }

              function getTimeAgo(date) {
                const diffMs = new Date() - date;
                const diffMins = Math.floor(diffMs / 60000);
                const diffHours = Math.floor(diffMs / 3600000);
                const diffDays = Math.floor(diffMs / 86400000);
                const diffWeeks = Math.floor(diffDays / 7);
                const diffMonths = Math.floor(diffDays / 30);
                const diffYears = Math.floor(diffDays / 365);

                if (diffMins < 1) return "baru saja";
                if (diffMins < 60) return `${diffMins} menit lalu`;
                if (diffHours < 24) return `${diffHours} jam lalu`;
                if (diffDays < 7) return `${diffDays} hari lalu`;
                if (diffWeeks < 4) return `${diffWeeks} minggu lalu`;
                if (diffMonths < 12) return `${diffMonths} bulan lalu`;
                return `${diffYears} tahun lalu`;
              }

              function formatDuration(duration) {
                if (!duration) return "N/A";
                const match = duration.match(/PT(\d+H)?(\d+M)?(\d+S)?/);
                if (!match) return "N/A";

                const hours = (match[1] || "").replace("H", "");
                const minutes = (match[2] || "").replace("M", "");
                const seconds = (match[3] || "").replace("S", "");

                if (hours) {
                  return `${hours}:${minutes.padStart(
                    2,
                    "0"
                  )}:${seconds.padStart(2, "0")}`;
                }
                return `${minutes || "0"}:${seconds.padStart(2, "0")}`;
              }

              function openVideo(videoId) {
                if (videoId)
                  window.open(
                    `https://www.youtube.com/watch?v=${videoId}`,
                    "_blank"
                  );
              }

              function showStatus(type, message) {
                const statusDiv = document.getElementById("statusMessage");
                statusDiv.className = `status ${type}`;
                statusDiv.textContent = message;
                statusDiv.style.display = "block";
              }

              // ========== AUTO REFRESH ==========
              function toggleAutoRefresh() {
                const btn = document.getElementById("autoRefreshBtn");

                if (autoRefreshInterval) {
                  clearInterval(autoRefreshInterval);
                  autoRefreshInterval = null;
                  btn.textContent = "⏰ Auto Refresh (2 menit)";
                  btn.classList.remove("primary-btn");
                  btn.classList.add("filter-btn");
                  showStatus("success", "Auto refresh dinonaktifkan");
                } else {
                  autoRefreshInterval = setInterval(loadVideos, 2 * 60 * 1000);
                  btn.textContent = "⏸️ Stop Auto Refresh";
                  btn.classList.remove("filter-btn");
                  btn.classList.add("primary-btn");
                  showStatus("success", "Auto refresh aktif (setiap 2 menit)");
                  loadVideos();
                }
              }

              // ========== SEARCH ==========
              document
                .getElementById("searchInput")
                .addEventListener("input", function () {
                  const searchTerm = this.value.toLowerCase();
                  const videoItems = document.querySelectorAll(".video-item");

                  videoItems.forEach((item) => {
                    const text = item.textContent.toLowerCase();
                    item.style.display =
                      text.includes(searchTerm) || searchTerm === ""
                        ? "flex"
                        : "none";
                  });
                });

              // ========== EVENT LISTENERS ==========
              document.addEventListener("DOMContentLoaded", function () {
                setTimeout(loadVideos, 1000);

                const menuLinks = document.querySelectorAll(
                  ".mobile-menu-items a"
                );
                menuLinks.forEach((link) => {
                  link.addEventListener("click", closeMobileMenu);
                });
              });

              document.addEventListener("keydown", function (event) {
                if (event.key === "Escape") closeMobileMenu();
              });
            </script>
          </body>
        </html>
      </body>
    </html>
  </body>
</html>
